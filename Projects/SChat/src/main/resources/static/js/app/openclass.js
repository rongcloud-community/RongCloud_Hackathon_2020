define("app/openclass/openclass",["init"],function(a){a("init"),$(".jsSignUp").live("click",function(a){var t=$(this),n=t.attr("data-id"),i="/Ajax/openClassApply";$("#layIphone").live("mouseover",function(){$(".code").show()}).live("mouseout",function(){$(".code").hide()}),$.ajax({url:i,type:"GET",dataType:"json",data:{id:n},success:function(a){if(1==a.status){$.alert('<div class="add-layer">预约成功，请通过51Talk专用软件上课<ul><li  class="lay-computer"><a href="http://www.51talk.com/ac/51TalkAC.php" target="_blank"><i></i>下载电脑版</a></li><li class="lay-iphone"><a href="http://www.51talk.com/app/download_app.php" target="_blank" id="layIphone"><i></i>下载手机版<span class="code"></span></a></li></ul></div>');var n=t.parents(".clist-li").find(".fontH span");t.html("进入教室").removeClass("jsSignUp").prev().show(),n.html(1*n.html()+1)}else 2==a.status?$.confirm(a.info,function(){window.open(a.data)},$.noop,"我也要付费","算了，学别的"):$.alert(a.info,function(){a.data&&(location.href=a.data)})},error:function(){}}),a.preventDefault()}),$(".u-cancel").on("click",function(){var a=$(this),t=a.next(),n=t.attr("data-id"),i="/Ajax/openClassCancel";$.ajax({url:i,type:"GET",dataType:"json",data:{id:n},success:function(n){if(1==n.status){$.alert(n.info);var i=a.parents(".clist-li").find(".fontH span");a.hide(),t.html("预约").addClass("jsSignUp"),i.html(1*i.html()-1)}else $.alert(n.info,function(){n.data&&(location.href=n.data)})},error:function(){$.alert("网络连接失败！")}})}),$(".clist-left").hover(function(){$(this).find(".cover-img").fadeIn()},function(){$(this).find(".cover-img").hide()}),$(".jsSignUp2").on("click",function(){var a=$(this),t=a.attr("data-joined")||0,n=a.attr("data-id");if(1==t)var i="/Ajax/openClassCancel";else var i="/Ajax/openClassApply";$.ajax({url:i,type:"GET",dataType:"json",data:{id:n},success:function(n){if(1==n.status){$.alert(n.info),a.attr("data-joined",1^t);var i=a.parents(".clist-li").find(".fontH span");1==t?(a.html("预约").removeClass("ed"),i.html(1*i.html()-1)):(a.html("取消预约").addClass("ed"),i.html(1*i.html()+1))}else 2==n.status?$.confirm(n.info,function(){window.open(n.data)},$.noop,"我也要付费","算了，学别的"):$.alert(n.info,function(){n.data&&(location.href=n.data)})},error:function(){$.alert("网络连接失败！")}})})});